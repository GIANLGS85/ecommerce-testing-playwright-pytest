[pytest]
# --- CLI Default Parameters ---
# --headed: Run tests with a visible browser window
# --slowmo: Delay actions by 500ms for easier debugging/observation
# --alluredir: Directory where Allure report data will be generated

addopts = --headed
    --slowmo 500 --alluredir=./reports/allure-results
    -v
    -ra
    -s
    --browser chromium
    --screenshot only-on-failure
    --video retain-on-failure
    --tb=short
    --self-contained-html

#asyncio_mode = auto
# --- Base URL Configuration ---
# Useful for switching between staging, UAT, or production environments
#base_url = https://practicesoftwaretesting.com/

# Python path - CRITICAL for imports!
pythonpath = .
# Add other projects if needed:
    # other_project_1
    # other_project_2

# ============================================================================
# TEST DISCOVERY - Where are your tests?
# ============================================================================
# CUSTOMIZE: Add your test directories here
# Test discovery - specify full paths
testpaths =
    tests

    # Add other project test paths:
    # other_project_1/tests
    # other_project_2/tests


# Test file patterns (usually don't change these)
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Execution options:
# -v: Verbose (show test names)
# -ra: Show summary of all results
# -s: Show print statements
# --headed: Show browser
# --slowmo=500: Slow down by 500ms
# --screenshot only-on-failure: Screenshots only when tests fail
# --video retain-on-failure: Videos only for failures
# --output ./results_Playwright/test-results: Videos in project folder
# --tb=short: Shorter traceback

# Execution options - MINIMAL
# conftest.py will set --output, --html, and log_file dynamically

# ============================================================================
# EXECUTION OPTIONS
# ============================================================================
# These control how tests run
# conftest.py sets: --output, --html, log_file (dynamically for timestamps)


# NOTE: These are set dynamically by conftest.py (DO NOT UNCOMMENT):
# --output ./results_Playwright/videos
# --html=./results_Playwright/test-report.html

# ============================================================================
# EXCLUDE DIRECTORIES
# ============================================================================
# Folders pytest should NOT search for tests

# Exclude directories
norecursedirs =
    venv
    venv-playwright
    .venv
    .env
    Backups
    __pycache__
    .git
    .pytest_cache
    results_Playwright
    reports
    screenshots
    node_modules
    .idea
    .vscode

 ============================================================================
# TEST MARKERS
# ============================================================================
# Use markers to categorize tests: @pytest.mark.smoke
# CUSTOMIZE: Add your own markers
markers =
    smoke: Quick smoke tests (critical path)
    regression: Full regression test suite
    critical: Critical functionality tests
    e2e: End-to-end UI tests
    api: API tests
    integration: Integration tests
    slow: Slow-running tests
    wip: Work in progress (skip in CI)
    skip_ci: Skip in CI environment


# ============================================================================
# CONSOLE LOGGING
# ============================================================================
# Show logs in console while tests run
log_cli = true
# Log level
log_cli_level = INFO
# Log format
log_cli_format = %(asctime)s [%(levelname)s] %(message)s (%(filename)s:%(lineno)s)
# Date format
log_cli_date_format = %H:%M:%S


# File logging
#log_file = ./results_Playwright/test-logs.log
#log_file_level = INFO
#log_file_format = %(asctime)s [%(levelname)8s] %(message)s
#log_file_date_format = %Y-%m-%d %H:%M:%S

# IMPORTANT: Don't set log_file here (conftest.py sets it dynamically)


# ============================================================================
# FILE LOGGING
# ============================================================================
# NOTE: log_file is set dynamically by conftest.py
# This ensures logs go to timestamped results folder
# DO NOT UNCOMMENT these lines:
# log_file = ./results_Playwright/test-logs.log
# log_file_level = INFO
# log_file_format = %(asctime)s [%(levelname)8s] %(message)s
# log_file_date_format = %Y-%m-%d %H:%M:%S

# ============================================================================
# PARALLEL EXECUTION (Optional)
# ============================================================================
# Uncomment to run tests in parallel (requires: pip install pytest-xdist)
# addopts = -n auto    # Use all CPU cores
# addopts = -n 4       # Use 4 processes

# ============================================================================
# PYTEST OPTIONS REFERENCE
# ============================================================================
# Common options you might want to add to addopts:
#
# -v, --verbose           Show test names
# -q, --quiet            Minimal output
# -s                     Show print statements
# -x, --exitfirst        Stop on first failure
# --maxfail=3            Stop after 3 failures
# -k "test_login"        Run only tests matching expression
# -m smoke               Run only tests with @pytest.mark.smoke
# --headed               Show browser (Playwright)
# --browser chromium     Browser to use (Playwright)
# --slowmo=1000          Slow down by 1000ms (Playwright)
# --screenshot on        Always take screenshots (Playwright)
# --video on             Always record videos (Playwright)
# --tracing on           Enable Playwright trace files
# --tb=short             Shorter traceback
# --tb=line              One line per failure
# --lf, --last-failed    Rerun only failed tests
# --ff, --failed-first   Run failed tests first
# --durations=10         Show 10 slowest tests
# ============================================================================
